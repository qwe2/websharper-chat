(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k;$.Define($$,{WebsharperChat:{Client:{Append:function(l){a.getElementById("chatbox").appendChild(c.Render(l,"black").Body);},Connect:function(m){return c.SetEventHandlers(new d(m));},Main:function(){var n,o,p;n=c.Connect("ws://"+e.location.host+"/chat");o=h.Input(i.ofArray([h.Text(""),h.Attr().NewAttr("id","message-box"),h.Attr().Class("form-control"),h.Attr().NewAttr("type","text")]));p=function(){return function(r){return r.CharacterCode===13?c.SendText(n,o):null;};};j.Events().OnKeyPress(p,o);return h.Div(i.ofArray([h.Div(i.ofArray([h.Attr().NewAttr("id","chatbox")])),o]));},Render:function(s,t){var u;u="color: "+t;return h.P(i.ofArray([h.Text(s),h.Attr().NewAttr("style",u)]));},SendText:function(v,w){v.send(w.get_Value());return w.set_Value("");},SetEventHandlers:function(x){x.onmessage=function(y){return c.Append(k(y.data));};x.onerror=function(){c.Render("Error","red");};return x;}},Controls:{EntryPoint:$.Class({get_Body:function(){return c.Main();}})}}});$.OnInit(function(){a=$.Safe($$.document);b=$.Safe($$.WebsharperChat);c=$.Safe(b.Client);d=$.Safe($$.WebSocket);e=$.Safe($$.window);f=$.Safe($$.IntelliFactory.WebSharper);g=$.Safe(f.Html);h=$.Safe(g.Default);i=$.Safe(f.List);j=$.Safe(g.EventsPervasives);return k=$.Safe($$.String);});$.OnLoad(function(){return;});}());
